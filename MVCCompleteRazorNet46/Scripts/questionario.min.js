$(document).ready(() => { let a = new URL(window.location); if (a = String(a), $("#icon-notifs").click(() => { AtualizaVisualizacaoNotifs() }), a.includes("/Dashboard")) { $("#anc-dashboard").click(), $("#ul-dashboard").addClass("in"), $("#sb-mn-dashboard").addClass("active"), $(".dataTables-example").dataTable({ responsive: !0, dom: 'T<"clear">lfrtip', tableTools: { sSwfPath: "js/plugins/dataTables/swf/copy_csv_xls_pdf.swf" } }), (e = $("#editable").dataTable()).$("td").editable("../example_ajax.php", { callback: function (a, s) { var r = e.fnGetPosition(this); e.fnUpdate(a, r[0], r[1]) }, submitdata: function (a, s) { return { row_id: this.parentNode.getAttribute("id"), column: e.fnGetPosition(this)[2] } }, width: "90%", height: "100%" }), $(".DTTT_container").hide(), $(".dataTables_length").hide(), $('input[type="search"]').css("font-weight", "100"), $("#DataTables_Table_0_filter").hide(), $("#DataTables_Table_1_filter").hide() } if (a.includes("Compartilhar/Formulario") && ($("#btn-compartilhar-form").click(a => { ValidaCompartilhamentoFormularios(), a.preventDefault() }), $("#anc-compartilhar").click(), $("#ul-compartilhar").addClass("in"), $("#sb-mn-formularios").addClass("active")), a.includes("Admin/Lead") && ($("#btn-consultar-leads").click(a => { ListaLeads(), a.preventDefault() }), $("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-leads").addClass("active")), a.includes("Admin/PermissaoFormularios") && ($("#empresa-permissao-formularios").change(() => { let a = $("#empresa-permissao-formularios").val(); CarregaListaPermissaoFormularios(a) }), $("#anc-permissoes").click(), $("#ul-permissoes").addClass("in"), $("#sb-mn-pform").addClass("active")), a.includes("Admin/Empresa") && ($("#anc-permissoes").click(), $("#ul-permissoes").addClass("in"), $("#sb-mn-empresa").addClass("active"), ExibeMsgValidacao("hdd-empresa-form-state", "hdd-empresa-error", "Seus dados foram salvos com sucesso!")), a.includes("Admin/Usuario")) { $("#btn-consultar-apr-usuario").click(a => { ListaUsuarios(), a.preventDefault() }); var s = document.querySelector(".js-switch_3"); new Switchery(s, { color: "#1AB394" }); $("#anc-permissoes").click(), $("#ul-permissoes").addClass("in"), $("#sb-mn-usuario").addClass("active"), $("#sb-mn-questionario, #sb-mn-perguntas, #sb-mn-respostas").removeClass("active"), ExibeMsgValidacao("hdd-usuario-form-state", "hdd-usuario-error", "Seus dados foram salvos com sucesso!"), "Nome da classificação obrigatório." == $("#sp-nome-usuario-error").text() && $("#fg-nome-usuario").addClass("has-error") } if (a.includes("Admin/Classificacao") && ($("#questionario-classificacao").change(() => { let a = $("#questionario-classificacao").val(); CarregaListaClassificacao(a) }), "" != $("#questionario-classificacao").val() && CarregaListaClassificacao($("#questionario-classificacao").val()), $("#btn-editar-classificacao").click(a => { a.preventDefault(), editaClassificacao() }), $("#txt-nome-classificacao").focus(), $("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-classificacao").addClass("active"), $("#sb-mn-questionario, #sb-mn-perguntas, #sb-mn-respostas").removeClass("active"), ExibeMsgValidacao("hdd-classificacao-form-state", "hdd-classificacao-error", "Seus dados foram salvos com sucesso!"), "Nome da classificação obrigatório." == $("#sp-nome-classificacao-error").text() && $("#fg-nome-classificacao").addClass("has-error"), "Selecione um questionário." == $("#sp-questionario-classificacao-error").text() && $("#fg-questionario-classificacao").addClass("has-error")), (a.includes("Admin/Questionario") || a.includes("Admin/EditarQuestionario")) && ($("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-questionario").addClass("active"), $("#sb-mn-classificacao, #sb-mn-perguntas, #sb-mn-respostas").removeClass("active"), ExibeMsgValidacao("hdd-questionario-form-state", "hdd-questionario-error", "Seus dados foram salvos com sucesso!"), "Nome do questionário obrigatório" == $("#sp-nome-questionario-error").text() && $("#fg-nome-questionario").addClass("has-error")), a.includes("Admin/Pergunta") && ($("#questionario-pergunta").change(() => { CarregaComboClassificacao($("#questionario-pergunta").val()), CarregaListaPerguntas($("#questionario-pergunta").val()) }), "" != $("#questionario-pergunta").val() && (CarregaComboClassificacao($("#questionario-pergunta").val()), CarregaListaPerguntas($("#questionario-pergunta").val())), $("#txt-descricao-pergunta").focus(), $("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-perguntas").addClass("active"), $("#sb-mn-classificacao, #sb-mn-questionario, #sb-mn-respostas").removeClass("active"), ExibeMsgValidacao("hdd-pergunta-form-state", "hdd-pergunta-error", "Seus dados foram salvos com sucesso!"), "Descrição da pergunta obrigatória." == $("#sp-nome-pergunta-error").text() && $("#fg-nome-pergunta").addClass("has-error"), "Selecione um questionário." == $("#sp-questionario-classificacao-error").text() && $("#fg-questionario-classificacao").addClass("has-error")), a.includes("Admin/Resposta") && ($("#questionario-resposta").change(() => { CarregaListaRespostas($("#questionario-resposta").val()), LimparFormularioAdmin() }), "" != $("#questionario-resposta").val() && CarregaListaRespostas($("#questionario-resposta").val()), listaValorResposta(), $("#txt-descricao-resposta").focus(), $("#btn-nova-resposta").click(a => { a.preventDefault(); var s = "http://" + window.location.hostname + ":" + window.location.port + "/Admin/Resposta"; window.location.replace(s) }), $("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-respostas").addClass("active"), $("#sb-mn-classificacao, #sb-mn-questionario, #sb-mn-perguntas").removeClass("active"), ExibeMsgValidacao("hdd-resposta-form-state", "hdd-resposta-error", "Seus dados foram salvos com sucesso!"), "Selecione um questionário." == $("#sp-questionario-pergunta-error").text() && $("#fg-questionario-pergunta").addClass("has-error")), a.includes("Admin/Resultados") || a.includes("Admin/ConsultarResultados")) { var e; $("#empresa-filtro-resultados").change(function () { $(this).val() }), $("#Exibicao").change(() => { "consolidado" == $("#Exibicao").val() ? $("#partial-cmb-respondente-resultados").hide() : $("#partial-cmb-respondente-resultados").show() }), $("#questionario-filtro-resultados, #empresa-filtro-resultados").change(() => { CarregaComboRespondente($("#questionario-filtro-resultados").val(), $("#empresa-filtro-resultados").val()) }), isNullOrEmpty($("#questionario-filtro-resultados").val()) || CarregaComboRespondente($("#questionario-filtro-resultados").val(), $("#empresa-filtro-resultados").val()), isNullOrEmpty($("#Exibicao").val()) || ("consolidado" == $("#Exibicao").val() ? $("#partial-cmb-respondente-resultados").hide() : $("#partial-cmb-respondente-resultados").show()), $("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-resultados").addClass("active"), $("#sb-mn-classificacao, #sb-mn-questionario, #sb-mn-perguntas").removeClass("active"), $(".dataTables-example").dataTable({ responsive: !0, dom: 'T<"clear">lfrtip', tableTools: { sSwfPath: "js/plugins/dataTables/swf/copy_csv_xls_pdf.swf" } }), (e = $("#editable").dataTable()).$("td").editable("../example_ajax.php", { callback: function (a, s) { var r = e.fnGetPosition(this); e.fnUpdate(a, r[0], r[1]) }, submitdata: function (a, s) { return { row_id: this.parentNode.getAttribute("id"), column: e.fnGetPosition(this)[2] } }, width: "90%", height: "100%" }), $(".DTTT_container").hide(), $(".dataTables_length").hide(), $('input[type="search"]').css("font-weight", "100"), $("#DataTables_Table_0_filter").hide() } if (a.includes("/Questionarios/")) { $("#btn-salvar-questionario").click(a => { a.preventDefault(), SalvarQuestionarioMindset() }), ExibeMsgValidacao("hdd-formulario-form-state", "hdd-formulario-form-error", "Seus dados foram salvos com sucesso!"), $("#anc-forms").click(), $("#ul-forms").addClass("in"); var r = a.split("/")[5]; $.get("/Formulario/ListarQuestionarios", null, function (a) { a.forEach(a => { a.Id === parseInt(r) ? $(`#sb-mn-${a.Nome.replace(" ", "")}`).addClass("active") : $(`#sb-mn-${a.Nome.replace(" ", "")}`).removeClass("active") }) }), "Nome da classificação obrigatório." == $("#sp-nome-classificacao-error").text() && $("#fg-nome-classificacao").addClass("has-error"), "Selecione um questionário." == $("#sp-questionario-classificacao-error").text() && $("#fg-questionario-classificacao").addClass("has-error") } a.includes("/Questionario/Form") && ($("#anc-forms").click(), $("#ul-forms").addClass("in"), $("#sb-mn-corg").addClass("active"), ExibeMsgValidacao("hdd-user-register-state", "hdd-user-unicity-error", "Você receberá um e-mail para confirmação do seu acesso!", "Seus dados foram salvos!")); let o = `http://localhost:${window.location.port}/`; "http://opportunatecnologia.com.br/" != a && a != o || ExibeMsgValidacao("hdd-login-form-state", "hdd-login-error", "", "Seus dados foram salvos!"), (a.includes("/Login/RedefinicaoSenha") || a.includes("/Login/SolicitacaoSenha")) && ExibeMsgValidacao("hdd-redefinicao-form-state", "hdd-redefinicao-error", "Seus dados foram salvos com sucesso!"), a.includes("Login/AcessoRestrito") && ExibeMsgValidacao("hdd-login-form-state", "hdd-login-error", "Seus dados foram salvos com sucesso!"), a.includes("/Registro") && ($("#w-registro").steps({ bodyTag: "fieldset", onStepChanging: function (a, s, e) { if (0 == s && $("#w-registro .actions a[href='#finish']").show(), 1 == s && $("#w-registro .actions a[href='#finish']").hide(), s > e) return !0; var r = $(this); return s < e && ($(".body:eq(" + e + ") label.error", r).remove(), $(".body:eq(" + e + ") .error", r).removeClass("error")), $("#Consentimento").is(":checked") ? (r.validate().settings.ignore = ":disabled,:hidden", r.valid()) : ($("#msg-consentimento").show(), !1) }, onStepChanged: function (a, s, e) { 2 === s && $(this).steps("next"), 2 === s && 3 === e && $(this).steps("previous"), $("#finish").addClass("disabled") }, onFinishing: function (a, s) { var e = $(this); return e.validate().settings.ignore = ":disabled", e.valid() }, onCanceled: function (a) { $(".reg-input").val(""), $("#estado-empresa").val(""), $("#ramo-empresa").val("") }, onFinished: function (a, s) { SalvarRegistroUsuario() }, labels: { cancel: "Limpar", current: "current step:", pagination: "Pagination", finish: "Registrar", next: "Seguinte", previous: "Anterior", loading: "Carregando ..." } }).validate({ errorPlacement: function (a, s) { s.before(a) }, rules: { confirm: { equalTo: "#password" } } }), $("#w-registro .actions a[href='#finish']").hide(), $("#w-registro .actions a[href='#cancel']").hide()), $(".btn-limpar-form").click(a => { a.preventDefault(), LimparFormularioAdmin() }) }); let url = new URL(window.location); url = String(url); const VerificarSession = () => { $.ajax({ type: "GET", url: "/Common/VerificarSessionAsync", dataType: "json", cache: !1, async: !0, success: a => { try { if (a.Error) { var s = "http://" + window.location.hostname + ":" + window.location.port; window.location.replace(s) } } catch (a) { } } }) }, CarregaListaClassificacao = (a, s = 0) => { $.ajax({ type: "GET", url: `/Admin/_ListarClassificacao/${a}`, dataType: "html", cache: !1, async: !0, success: a => { $("#lista-classificacao").html(a) } }) }, ListaLeads = () => { let a = { TpLead: $("#tp-lead").val() }; $.ajax({ type: "POST", url: "/Admin/_ListarLeads/", data: a, dataType: "html", cache: !1, async: !0, success: a => { $("#partial-lista-leads").html(a) } }) }, ListaUsuarios = () => { let a = { VM: { Nome: $("#nome-apr-usuario").val(), Aprovado: $("#situacao-apr-usuario").val() } }; $.ajax({ type: "POST", url: "/Admin/_ListarUsuarios/", data: a, dataType: "html", cache: !1, async: !0, success: a => { $("#lista-apr-usuario").html(a) } }) }, SalvarPermissaoForm = a => { let s = !1; $(`#chk-permissao-form-${a}`).is(":checked") && (s = !0); let e = { VM: { Id: a, Ativo: s } }; $.ajax({ type: "POST", data: e, url: "/admin/SalvarPermissaoFormulario", dataType: "json", cache: !1, async: !0, success: a => { } }) }, SalvarRegistroUsuario = () => { let a = $("#Consentimento").is(":checked"), s = { VMU: { CPF: $("#CPF_usuario_registro").val().replace(/[^\d]+/g, ""), Nome: $("#Nome").val(), Email: $("#Email").val(), DtNascimento: $("#DtNascimento").val(), Telefone: $("#Telefone").val().replace(/[^\d]+/g, ""), Senha: $("#Senha").val(), SenhaConfirmacao: $("#SenhaConfirmacao").val(), Consentimento: a }, VME: { CNPJ: $("#CNPJ").val().replace(/[^\d]+/g, ""), Nome: $("#Empresa").val(), Cidade: $("#Cidade").val(), Estado: $("#estado-empresa").val(), Ramo: $("#ramo-empresa").val() } }; $.ajax({ type: "POST", data: s, url: "/Registro/Index", dataType: "json", cache: !1, async: !0, success: a => { try { a.Success && ($(".reg-input").val(""), $("#estado-empresa").val(""), $("#ramo-empresa").val(""), $("#dv-success").show(), $("#dv-w-registro").hide()) } catch{ } try { a.Error && (ShowToastrError("Erro!", a.Error, 1e4), "Consentimento obrigatório." == a.Error && ($("#msg-consentimento").show(), $("#w-registro .actions a[href='#previous']").click())) } catch{ } } }) }; class ObjLead { constructor(a, s, e, r, o, i, t, c, l, n, d, u, m, p) { this.nome = a, this.email = s, this.telefone = e, this.nomeEmpresa = r, this.CNPJ = o, this.cidadeEmpresa = i, this.estadoEmpresa = t, this.cargo = c, this.ramo = l, this.tiTerceirizada = n, this.adequacaoLGPD = d, this.situacaoTI = u, this.areaJuridica = m, this.qtdeClientes = p } } const carregaMdLead = a => { $.ajax({ type: "GET", url: `/LGPD/CarregarDadosEtapaLGPD/${a}`, dataType: "json", cache: !1, async: !0, success: a => { CarregaDetalhesMdLead(a.Lead, a.Empresa), CarregaDeptosLead(a.Deptos) } }) }, CarregaDetalhesMdLead = (a, s) => { $("#sp-nome").text(a.nome_completo), $("#sp-email").text(a.email), $("#sp-telefone").text(a.telefone), $("#sp-nomeEmpresa").text(s.nome), $("#sp-CNPJ").text(s.CNPJ), $("#sp-cidadeEmpresa").text(s.cidadeEmpresa), $("#sp-estadoEmpresa").text(s.estadoEmpresa), $("#sp-cargo").text(a.cargo), $("#sp-ramo").text(a.ramo), $("#sp-tiTerceirizada").text(a.compartilha_dados), $("#sp-adequacaoLGPD").text(a.iniciou_adequacao), $("#sp-situacaoTI").text(a.lgpd_situacao_ti), $("#sp-areaJuridica").text(a.lgpd_situacao_juridico), $("#sp-qtdeClientes").text(a.qnt_colaborador) }, SalvarQuestionarioMindset = () => { let a = []; var s = $(".cls-respostas"); $.map(s, function (s) { let e = s.value.split("#")[0], r = s.value.split("#")[1], o = s.value.split("#")[2]; a.push({ rpu_usu_id: $("#hdd-id-usuario").val(), rpu_qst_id: $("#hdd-id-questionario").val(), rpu_rsp_id: r, rpu_prg_id: e, rpu_valor_resposta: o }) }); let e = { Respostas: a }; $.ajax({ type: "POST", data: e, url: "/Formulario/Salvar", dataType: "json", cache: !1, async: !0, success: a => { $("html, body").animate({ scrollTop: 0 }, "fast"), $("#dv-forms").hide(), $("#dv-msg-error-form").hide(), $("#dv-msg-success-form").show() } }) }, excluirRegistro = a => { let s = $(`#questionario-${a.toLowerCase()}`).val(), e = ""; switch (a) { case "Questionario": e = `/Admin/Remover${a}/${$("#hdd-id-registro-selected").val()}`; break; case "Classificacao": e = `/Admin/Remover${a}/?IdC=${$("#hdd-id-registro-selected").val()}&IdQ=${s}`; break; case "Pergunta": e = `/Admin/Remover${a}/?IdP=${$("#hdd-id-registro-selected").val()}&IdQ=${s}`; break; case "Resposta": e = `/Admin/Remover${a}/?IdR=${$("#hdd-id-registro-selected").val()}&IdQ=${s}`; break; case "Empresa": e = `/Admin/Remover${a}/?IdE=${$("#hdd-id-registro-selected").val()}` }$.ajax({ type: "GET", url: e, dataType: "json", cache: !1, async: !0, success: e => { if (e.Error) ShowToastrError("Erro ao Excluir", e.Error, 5e3); else { if ($("#hdd-id-classificacao").val($("#hdd-id-registro-selected").val()), 1 == e.Empty) { var r = "http://" + window.location.hostname + ":" + window.location.port + "/Admin/" + a + "?success=True&IdQ=" + s; window.location.replace(r) } switch (a) { case "Questionario": r = "http://" + window.location.hostname + ":" + window.location.port + "/Admin/" + a; return void window.location.replace(r); case "Classificacao": return void CarregaListaClassificacao(s); case "Pergunta": return void CarregaListaPerguntas($("#questionario-pergunta").val()); case "Resposta": return void CarregaListaRespostas($("#questionario-resposta").val()); case "Empresa": r = "http://" + window.location.hostname + ":" + window.location.port + "/Admin/" + a; return void window.location.replace(r) } } } }) }, CarregaListaRespostas = a => { $.ajax({ type: "GET", url: `/Admin/_ListarRespostas/${a}`, dataType: "html", cache: !1, async: !0, success: a => { $("#lista-resposta").html(a) } }) }, CarregaListaPerguntas = a => { $.ajax({ type: "GET", url: `/Admin/_ListarPerguntas/${a}`, dataType: "html", cache: !1, async: !0, success: a => { $("#lista-pergunta").html(a) } }) }, CarregaComboDepto = (a = 0) => { $.ajax({ type: "GET", url: `/Admin/_ComboDepartamento/${a}`, dataType: "html", cache: !1, async: !0, success: a => { $("#partial-cmb-departamento-resultados").html(a) } }) }, CarregaComboRespondente = (a, s = null) => { $.ajax({ type: "GET", url: `/Admin/_ComboRespondente/?IdQ=${a}&IdE=${s}`, dataType: "html", cache: !1, async: !0, success: a => { $("#partial-cmb-respondente-resultados").html(a); let s = $("#hdd-id-respondente-selected").val(); isNullOrEmpty(s) || $("#respondente-filtro-resultados").val(s) } }) }, ExibirSideMenu = () => { $.ajax({ type: "GET", url: "/Common/_SideMenu", dataType: "html", cache: !1, async: !0, success: a => { $("#partial-side-menu").html(a), (url.includes("Admin/Questionario") || url.includes("Admin/EditarQuestionario")) && ($("#anc-admin").click(), $("#ul-admin").addClass("in"), $("#sb-mn-questionario").addClass("active")) } }) }, SalvarAprovacaoUsuario = a => { let s = $("#chk-apr-usuario-" + a).is(":checked"); $.ajax({ type: "GET", url: `/Admin/SalvarAprovacaoUsuario/${a}/?Checked=${s}`, dataType: "json", cache: !1, async: !0, success: a => { } }) }, ValidarPreenchimentoQ = () => { var a = !0; return $(".cls-respostas").each((s, e) => { isNullOrEmpty($(e).val()) && (a = !1) }), a }, CarregaComboClassificacao = (a = 0) => { $.ajax({ type: "GET", url: `/Admin/_ComboClassificacao/${a}`, dataType: "html", cache: !1, async: !0, success: a => { if ($("#partial-cmb-classificacao-pergunta").html(a), url.includes("IdC")) { let a = getUrlParams(url, "IdC"); $("#IdClassificacao").val(a) } } }) }, ShowToastrError = (a, s, e = 2e3) => { toastr.options = { timeOut: e }, toastr.error(s, a) }, ShowToastrSuccess = (a, s, e = 2e3) => { toastr.options = { timeOut: e }, toastr.success(s, a) }, editaClassificacao = () => { let a = $("#hdd-id-classificacao").val(), s = $("#txt-nome-classificacao").val(); $.ajax({ type: "GET", url: `/Admin/SalvarClassificacao/?Id=${a}&Nome=${s}`, dataType: "json", cache: !1, async: !0, success: a => { try { a.Ok && CarregaListaClassificacao($("#questionario-classificacao").val()) } catch{ } try { a.Error && ShowToastrError("Erro!", a.Error, 1e4) } catch{ } } }) }, CarregaListaPermissaoFormularios = a => { $.ajax({ type: "GET", url: `/Admin/_ListarPermissaoFormularios/${a}`, dataType: "html", cache: !1, async: !0, success: a => { $("#partial-lista-formularios-permissao").html(a) } }) }, AdicionarValorResposta = a => { let s = $("#valor-resposta").val(); $.ajax({ type: "GET", url: `/Admin/AdicionarValorResposta/?IdResposta=${a}&valor=${s}`, dataType: "json", cache: !1, async: !0, success: s => { try { s.Ok && ($("#valor-resposta").val(""), listaValorResposta(a)) } catch{ } try { s.Error && ShowToastrError("Erro!", s.Error, 1e4) } catch{ } } }) }, excluiValorResposta = a => { $.ajax({ type: "GET", url: `/Admin/ExcluirValorResposta/${a}`, dataType: "json", cache: !1, async: !0, success: s => { try { s.Ok && listaValorResposta(a) } catch{ } try { s.Error && ShowToastrError("Erro!", s.Error, 1e4) } catch{ } } }) }, ValidaCompartilhamentoFormularios = () => { if (0 == FormShareSelected.length) return void ShowToastrError("Erro", "Selecione pelo menos um formulário a ser compartilhado", 3e3); if (isNullOrEmpty($("#Emails").val())) return void ShowToastrError("Erro", "Infome pelo menos um email a ser compartilhado", 3e3); $("#btn-compartilhar-form").attr("disabled", "true"), $("#dv-processando").show(); let a = []; FormShareSelected.forEach(s => { a.push({ IdFormulario: s, Emails: $("#Emails").val() }) }); let s = { VM: a }; $.ajax({ type: "POST", url: "/Compartilhar/Formularios", data: s, dataType: "json", cache: !1, async: !0, success: a => { $("#btn-compartilhar-form").removeAttr("disabled", "true"), $("#dv-processando").hide(); try { a.Success && (ShowToastrSuccess("Sucesso!", a.Success, 3e3), $("#Emails").val("")), a.Error && (a.Error.includes("Email inválido!") ? ShowToastrError("Erro!", a.Error, 5e3) : ShowToastrError("Erro!", "problemas no compartilhamento de formulários", 5e3)) } catch{ } } }) }; var FormShareSelected = []; const SelecionarShareForm = a => { $(`#chk-share-form-${a}`).is(":checked") ? FormShareSelected.push(a) : FormShareSelected = RemoverArrayElement(FormShareSelected, a) }, AtualizaVisualizacaoNotifs = () => { $.ajax({ type: "GET", url: "/Admin/AtualizarNotificacoes/", dataType: "json", cache: !1, async: !0, success: a => { try { a.Success && $("#notif-count").hide() } catch{ } try { a.Error && ShowToastrError("Erro!", a.Error, 3e3) } catch{ } } }) }, listaValorResposta = (a = null) => { $.ajax({ type: "GET", url: `/Admin/_ListarValorResposta/${a}`, dataType: "html", cache: !1, async: !0, success: a => { $("#partial-lista-valor-reposta").html(a) } }) }, ValidaCNPJ = a => { if (isNullOrEmpty(a)) return; let s = { CNPJ: a }; $.ajax({ type: "POST", url: "/Common/CnpjValido", data: s, dataType: "json", cache: !1, async: !0, success: a => { try { a.Result && $("#hdd-empresa-form-state").val(a.Result) } catch{ } try { a.Error && ($("#hdd-empresa-error").val(a.Error), $("#cnpj-msg").text(a.Error)) } catch{ } } }) }, ValidarEmail = a => { $.ajax({ type: "GET", url: `/Registro/ValidarEmail/?Email=${a.value}`, dataType: "json", cache: !1, async: !0, success: a => { $("#w-registro .actions a[href='#next']").show(); try { $("#CPF_label_error").text(""), a.Success && ($("#invalid-email-error").text(""), $("#w-registro .actions a[href='#next']").show()), a.Error && "Email inválido." == a.Error && ($("#invalid-email-error").text(a.Error), $("#w-registro .actions a[href='#next']").hide()) } catch{ } } }) }, VerificaUnicidadeUsuarioCpf = a => { $.ajax({ type: "GET", url: `/Registro/VerificarUnicidadeUsuarioPorCpf/?CPF=${a.value}`, dataType: "json", cache: !1, async: !0, success: a => { $("#w-registro .actions a[href='#next']").show(); try { $("#CPF_label_error").text(""), a.Success && $("#CPF_label_error").text(""), a.Error && "CPF já cadastrado no sistema." == a.Error && ($("#CPF_label_error").text(a.Error), $("#w-registro .actions a[href='#next']").hide()) } catch{ } } }) }, ativaNivelAcesso = (a, s) => { $.ajax({ type: "GET", url: `/Admin/SalvarNivelAcesso/?Acesso=${a}&IdUsuario=${s}`, dataType: "json", cache: !1, async: !0, success: a => { try { a.Ok && ListaUsuarios() } catch{ } try { a.Error && ShowToastrError("Erro!", a.Error, 1e4) } catch{ } } }) }, LimparFormularioAdmin = () => { $(".qst-input").val("") }, OcultaMsgConsent = () => { $("#Consentimento").is(":checked") ? $("#msg-consentimento").hide() : $("#msg-consentimento").show() }, ExibeMsgValidacao = (a, s, e, r = "Parabéns!") => { try { isNullOrEmpty(a) || "True" == $(`#${a}`).val() && ShowToastrSuccess(r, e, 6e3), isNullOrEmpty(s) || $(`#${s}`).val().length && ShowToastrError("Erro!", $(`#${s}`).val(), 1e4) } catch (a) { return } }, CarregaDeptosLead = a => { let s = ""; a.forEach(a => { s += `<li>${a.nome}</li>` }); let e = `<ul>${s}</ul>`; $("#dv-deptos").html(e) };